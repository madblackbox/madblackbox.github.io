<!doctype html><html lang=en><head><title>Multi-account work on GitHub or GitLab. · madblackbox.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="madblackbox"><meta name=description content="How to work with multiple accounts on GitHub."><meta name=keywords content="blog,devops,sysops,cloud"><meta name=twitter:card content="summary"><meta name=twitter:title content="Multi-account work on GitHub or GitLab."><meta name=twitter:description content="How to work with multiple accounts on GitHub."><meta property="og:title" content="Multi-account work on GitHub or GitLab."><meta property="og:description" content="How to work with multiple accounts on GitHub."><meta property="og:type" content="article"><meta property="og:url" content="https://madblackbox.com/posts/2023-08-30-multiaccount-github/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-30T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-30T00:00:00+00:00"><link rel=canonical href=https://madblackbox.com/posts/2023-08-30-multiaccount-github/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.5d95af2e197643bd0f5d749c439a5e8f91ca72e3a0631d81fd14ccc4615ea85f.css integrity="sha256-XZWvLhl2Q70PXXScQ5pej5HKcuOgYx2B/RTMxGFeqF8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicons/favicon.svg sizes=any><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>madblackbox.com</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://madblackbox.com/posts/2023-08-30-multiaccount-github/>Multi-account work on GitHub or GitLab.</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2023-08-30T00:00:00Z>August 30, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
3-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/git/>git</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/github/>github</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/gitlab/>gitlab</a></span></div></div></header><div class=post-content><p><strong>Multitple accounts</strong></p><p>There are situations that you need to work with multiple accounts on GitHub (or GitLab) and use each of them independently of each other.
When that happens you might run into problem that each accounts has it&rsquo;s own SSH key uploaded and when you try to connect to your
non default account you get an error message saying &ldquo;Permission denied!&rdquo;.
All of that happened to and below you my solution to it.</p><div class="notice note"><div class=notice-title><i class="fa fa-sticky-note" aria-hidden=true></i>Note</div><div class=notice-content>I assume that you use <code>SSH</code> method for working with git on GitHub/GitLab.</div></div><p>Let&rsquo;s assume that you already have multiple accounts on GitHub and each of them have uploaded SSH key.
Each key is different hence GitHub does not allow to have the same key uploaded to multiple accounts.</p><p>As soon as you tried to push anything to your repository on GitHub you receive an error message:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git checkout -b test
</span></span><span style=display:flex><span>Switched to a new branch <span style=color:#a5d6ff>&#39;test&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>...<span style=color:#ff7b72;font-weight:700>]</span>
</span></span><span style=display:flex><span>$ git push test
</span></span><span style=display:flex><span>fatal: <span style=color:#a5d6ff>&#39;test&#39;</span> does not appear to be a git repository
</span></span><span style=display:flex><span>fatal: Could not read from remote repository.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please make sure you have the correct access rights
</span></span><span style=display:flex><span>and the repository exists.
</span></span></code></pre></div><p>In my case that message is 100% correct beacause <code>git</code> used my <code>default</code> SSH-key which does not have access to that specific repo.
Since we know where is the problem let&rsquo;s make <code>git</code> use the proper SSH key.</p><p><strong>Repository already cloned</strong></p><p>Let&rsquo;s check current git remotes:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git remote -v                                                 
</span></span><span style=display:flex><span>origin  git@github.com:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>fetch<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>origin  git@github.com:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>push<span style=color:#ff7b72;font-weight:700>)</span>
</span></span></code></pre></div><p><em><strong>Configuring ssh config</strong></em></p><p>Since we use <code>ssh</code> method for connecting with GitHub we need to make changes to <code>ssh</code> itself, let&rsquo;s edit <code>~/.ssh/config</code> <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-conf data-lang=conf><span style=display:flex><span><span style=color:#8b949e;font-style:italic># ~/.ssh/config
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#79c0ff>Host</span> <span style=color:#79c0ff>github-default</span>
</span></span><span style=display:flex><span>    <span style=color:#79c0ff>HostName</span> <span style=color:#79c0ff>github.com</span>
</span></span><span style=display:flex><span>    <span style=color:#79c0ff>User</span> <span style=color:#79c0ff>git</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#79c0ff>Host</span> <span style=color:#79c0ff>github-mbbx</span> <span style=color:#8b949e;font-style:italic># we will use that name for git remote
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#79c0ff>Hostname</span> <span style=color:#79c0ff>github.com</span>
</span></span><span style=display:flex><span>    <span style=color:#79c0ff>User</span> <span style=color:#79c0ff>git</span>
</span></span><span style=display:flex><span>    <span style=color:#79c0ff>IdentityFile</span>  <span style=color:#f85149>~/</span><span style=color:#79c0ff>.ssh</span><span style=color:#f85149>/</span><span style=color:#79c0ff>id_mbbx_25519</span> <span style=color:#8b949e;font-style:italic># path to your non-default user&#39;s SSH private key
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#79c0ff>IdentitiesOnly</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>yes</span>
</span></span></code></pre></div><p><em><strong>Configuring remotes</strong></em></p><p>Let&rsquo;s add a new remote, please pay attention that here we use <strong>github-mbbx</strong> that we put in <code>~/.ssh/config</code> earlier:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git remote add origin-mbbx git@github-mbbx:madblackbox/madblackbox.github.io.git
</span></span></code></pre></div><p>let&rsquo;s confirm that we successfully added new remote:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git remote -v                       
</span></span><span style=display:flex><span>origin  git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>fetch<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>origin  git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>push<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>origin-mbbx git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>fetch<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>origin-mbbx git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>push<span style=color:#ff7b72;font-weight:700>)</span>
</span></span></code></pre></div><p>let&rsquo;s check whether do we have access now:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git push origin-mbbx test
</span></span></code></pre></div><p>if there are no error message we can replace old <strong>origin</strong> with the new one:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git remote remove origin
</span></span><span style=display:flex><span>$ git remote rename origin-mbbx origin
</span></span></code></pre></div><p>now let&rsquo;s check current remote configuration, result should be similar to:</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git remote -v                       
</span></span><span style=display:flex><span>origin  git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>fetch<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>origin  git@github-mbbx:madblackbox/madblackbox.github.io.git <span style=color:#ff7b72;font-weight:700>(</span>push<span style=color:#ff7b72;font-weight:700>)</span>
</span></span></code></pre></div><p>and if everything went ok you should be able to use that repo as any other without keeping in mind that this one is conneced with your non-default account.</p><div class="notice warning"><div class=notice-title><i class="fa fa-exclamation-triangle" aria-hidden=true></i>Warning</div><div class=notice-content><p>You propably should also configure git itself!</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git config --local user.email you-alternative@email.com
</span></span><span style=display:flex><span>$ git config --local user.name YouAlternative UserName
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>etc.<span style=color:#ff7b72;font-weight:700>]</span>
</span></span></code></pre></div></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.ssh.com/academy/ssh/config class=external-link target=_blank rel=noopener>https://www.ssh.com/academy/ssh/config</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2023
madblackbox
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1WWTFYJ380"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1WWTFYJ380",{anonymize_ip:!1})}</script></body></html>